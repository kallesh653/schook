================================================================================
FRONT PAGE MANAGEMENT - COMPLETE CONNECTION GUIDE
================================================================================

Project: GenTime School Management System
Feature: Front Page Management
Author: Kallesh SK
Last Updated: 2025-10-06

================================================================================
TABLE OF CONTENTS
================================================================================

1. OVERVIEW
2. COMPLETE CONNECTION FLOW
3. BACKEND STRUCTURE
4. FRONTEND STRUCTURE
5. HOW TO USE FRONT PAGE MANAGEMENT
6. DATA FLOW DIAGRAM
7. TROUBLESHOOTING
8. TESTING GUIDE

================================================================================
1. OVERVIEW
================================================================================

Front Page Management allows school administrators to customize the public-facing
home page without touching any code. Everything is connected and working properly.

Features Managed:
âœ“ School Information (name, tagline, description, statistics)
âœ“ Media Files (logo, images, videos)
âœ“ Image Slider (carousel with images/videos)
âœ“ Gallery Images (campus photos)
âœ“ News & Announcements
âœ“ School Programs
âœ“ Theme Colors & Settings
âœ“ Header & Navigation Settings

================================================================================
2. COMPLETE CONNECTION FLOW
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER WORKFLOW                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Admin logs into School Dashboard
   â†“
2. Navigates to "Front Page Management"
   URL: https://gentime.in/school/front-page
   â†“
3. Changes data (uploads images, edits text, adds news, etc.)
   â†“
4. Clicks "Save" button
   â†“
5. Data sent to backend API
   â†“
6. Backend saves to MongoDB
   â†“
7. Frontend triggers refresh event
   â†“
8. Public home page auto-updates
   â†“
9. Visitors see new content immediately

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TECHNICAL DATA FLOW                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ADMIN SAVES DATA:
-----------------
1. Admin Component: /school/components/front-page-management/FrontPageManagement.jsx
   â†“ (HTTP PATCH request)
2. Backend Route: /api/front-page/* (various endpoints)
   â†“
3. Backend Controller: api/controller/frontPage.controller.js
   â†“
4. Database Model: api/model/frontPage.model.js
   â†“
5. MongoDB: Saves to "frontpages" collection
   â†“ (triggers refresh event)
6. Event Listener: window.dispatchEvent('frontpage-refresh')


PUBLIC VIEWS DATA:
------------------
1. Visitor opens: https://gentime.in
   â†“
2. Home Component: /client/components/home/Home.jsx loads
   â†“ (HTTP GET request)
3. Backend Route: /api/front-page/public/:schoolId
   â†“
4. Backend Controller: frontPageController.getPublicFrontPageData()
   â†“
5. MongoDB: Fetches from "frontpages" collection
   â†“
6. Frontend renders: BeautifulSlider, Gallery, News, etc.
   â†“
7. Visitor sees customized home page

================================================================================
3. BACKEND STRUCTURE
================================================================================

3.1 DATABASE MODEL
-------------------
File: api/model/frontPage.model.js

Schema Structure:
{
  schoolId: ObjectId (reference to School),

  schoolInfo: {
    name: String,
    tagline: String,
    description: String,
    established: String,
    students: String,
    teachers: String,
    achievements: String
  },

  media: {
    logo: String (Base64 or URL),
    heroImage: String,
    aboutImage: String,
    heroVideo: String,
    promoVideo: String,
    campusVideo: String,
    virtualTour: String,
    galleryImages: [String],
    sliderImages: [{
      id: String,
      url: String,
      title: String,
      description: String,
      active: Boolean
    }]
  },

  news: [{
    title: String,
    description: String,
    date: Date,
    published: Boolean
  }],

  programs: [{
    title: String,
    description: String,
    icon: String,
    color: String
  }],

  theme: {
    primaryColor: String,
    secondaryColor: String,
    showStatistics: Boolean,
    showNews: Boolean,
    showPrograms: Boolean,
    showGallery: Boolean,
    showVideos: Boolean
  },

  headerSettings: {
    schoolName: String,
    showLogo: Boolean,
    logoPosition: String,
    navigationStyle: String,
    backgroundColor: String,
    textColor: String,
    showLoginButton: Boolean,
    showRegisterButton: Boolean,
    showDashboardButton: Boolean
  }
}

3.2 API ROUTES
--------------
File: api/router/frontPage.router.js

PROTECTED ROUTES (Require SCHOOL role authentication):
-------------------------------------------------------
GET    /api/front-page/data
       â†’ frontPageController.getFrontPageData()
       â†’ Returns all front page data for logged-in school

PATCH  /api/front-page/school-info
       â†’ frontPageController.updateSchoolInfo()
       â†’ Updates school information

PATCH  /api/front-page/media
       â†’ frontPageController.updateMedia()
       â†’ Updates media files (images/videos)

POST   /api/front-page/news
       â†’ frontPageController.addNews()
       â†’ Adds new news item

PATCH  /api/front-page/news/:newsId
       â†’ frontPageController.updateNews()
       â†’ Updates existing news item

DELETE /api/front-page/news/:newsId
       â†’ frontPageController.deleteNews()
       â†’ Deletes news item

PATCH  /api/front-page/theme
       â†’ frontPageController.updateTheme()
       â†’ Updates theme colors and visibility settings

PATCH  /api/front-page/header-settings
       â†’ frontPageController.updateHeaderSettings()
       â†’ Updates header and navigation settings

PUBLIC ROUTES (No authentication required):
--------------------------------------------
GET    /api/front-page/public/:schoolId
       â†’ frontPageController.getPublicFrontPageData()
       â†’ Returns front page data for public viewing

3.3 CONTROLLER FUNCTIONS
-------------------------
File: api/controller/frontPage.controller.js

Key Functions:

1. getFrontPageData()
   - Gets data for authenticated school admin
   - Creates default data if none exists
   - Returns complete front page configuration

2. getPublicFrontPageData(schoolId)
   - Gets data for public viewing
   - No authentication required
   - Used by home page

3. updateSchoolInfo(data)
   - Updates school information section
   - Validates and saves to database

4. updateMedia(mediaData)
   - Handles file uploads (Base64 encoded)
   - Supports images and videos
   - Updates gallery and slider images

5. addNews(newsData)
   - Adds new news/announcement
   - Auto-generates date

6. updateNews(newsId, newsData)
   - Updates existing news item

7. deleteNews(newsId)
   - Removes news item

8. updateTheme(themeData)
   - Updates color scheme
   - Toggles section visibility

9. updateHeaderSettings(headerData)
   - Customizes navigation bar
   - Controls button visibility

3.4 SERVER REGISTRATION
-----------------------
File: api/server.js (Line 68)

const frontPageRouter = require('./router/frontPage.router');
app.use("/api/front-page", frontPageRouter);

âœ… Route is properly registered and accessible

================================================================================
4. FRONTEND STRUCTURE
================================================================================

4.1 ADMIN COMPONENT
-------------------
File: frontend/src/school/components/front-page-management/FrontPageManagement.jsx

Tabs:
1. School Info - Edit name, tagline, description, statistics
2. Media - Upload logo, images, videos
3. Slider - Manage carousel slides
4. News - Add/edit announcements
5. Programs - Manage school programs
6. Theme - Customize colors and visibility
7. Header - Customize navigation

Key Functions:

fetchFrontPageData()
- Fetches data from /api/front-page/data
- Populates all form fields
- Runs on component mount

handleSaveSchoolInfo()
- Sends PATCH to /api/front-page/school-info
- Updates school information

handleFileUpload(field, file)
- Converts file to Base64
- Sends PATCH to /api/front-page/media
- Handles images and videos

handleVideoUrlSave(field, url)
- Saves YouTube/video URLs
- Sends PATCH to /api/front-page/media

handleSaveNews(newsData)
- Adds or updates news
- POST or PATCH to /api/front-page/news

handleSaveSlide(slideData)
- Saves slider image/video
- Updates slider array
- PATCH to /api/front-page/media

triggerFrontPageRefresh()
- Dispatches custom event
- Tells Home.jsx to refresh
- window.dispatchEvent(new CustomEvent('frontpage-refresh'))

4.2 PUBLIC HOME COMPONENT
-------------------------
File: frontend/src/client/components/home/Home.jsx

Key Functions:

fetchFrontPageData()
- Tries authenticated endpoint first
- Falls back to public endpoint
- Fetches from /api/front-page/public/:schoolId

Data Processing:
- Combines slider images and videos into one array
- Sets state for all sections
- Passes data to child components

Auto-refresh Features:
- Polls every 30 seconds
- Refreshes on window focus
- Listens for 'frontpage-refresh' event

Child Components:
- BeautifulSlider.jsx - Displays image/video carousel
- Gallery section - Shows campus photos
- Stats section - Shows statistics
- News section - Displays announcements
- Programs section - Shows school programs

4.3 BEAUTIFUL SLIDER COMPONENT
-------------------------------
File: frontend/src/client/components/home/BeautifulSlider.jsx

Features:
- Supports both images and videos
- Auto-play with pause on hover
- Navigation buttons and dots
- Video mute/unmute control
- Smooth transitions
- Responsive design

Props:
- slides: Array of slide objects
  {
    id: unique identifier,
    type: 'image' or 'video',
    url: image/video URL,
    title: slide title,
    description: slide description
  }

4.4 ROUTING
-----------
File: frontend/src/App.jsx

Admin Route (Line 66):
<Route path="school/front-page" element={<FrontPageManagement />} />

Public Route (Line 107):
<Route index element={<Home />} />
<Route path="home" element={<Home />} />

âœ… Routes properly configured

================================================================================
5. HOW TO USE FRONT PAGE MANAGEMENT
================================================================================

5.1 ACCESSING THE ADMIN PANEL
------------------------------

Step 1: Login as School Admin
URL: https://gentime.in/login
Credentials: School admin email and password

Step 2: Navigate to Front Page Management
- Click "Front Page Management" in sidebar
- OR go to: https://gentime.in/school/front-page

Step 3: You'll see 7 tabs:
- School Info
- Media
- Slider
- News
- Programs
- Theme
- Header

5.2 EDITING SCHOOL INFORMATION
-------------------------------

Tab: "School Info"

Fields:
- School Name
- Tagline (motto)
- Description
- Established Year
- Number of Students
- Number of Teachers
- Achievements Count

Steps:
1. Edit any field
2. Click "Save School Information" button
3. Success message appears
4. Home page updates automatically

5.3 UPLOADING MEDIA
-------------------

Tab: "Media"

Sections:

A. Logo Upload
   - Click upload box
   - Select image file
   - Logo appears in header

B. Hero Image
   - Main image for hero section
   - Click upload box
   - Select image file

C. About Image
   - Image for about section
   - Click upload box
   - Select image file

D. Videos
   - Hero Video: Main promotional video
   - Promo Video: Secondary promo
   - Campus Video: Campus tour
   - Virtual Tour: 360Â° tour link

   For each video:
   Option 1: Upload video file
   Option 2: Paste YouTube URL

E. Gallery Images
   - Click "Upload Gallery Images"
   - Select multiple images
   - Images appear in gallery grid
   - Delete button on each image

All uploads are instant - no save button needed!

5.4 MANAGING SLIDER
-------------------

Tab: "Slider"

The slider appears at the top of home page.

Add New Slide:
1. Click "Add New Slide" button
2. Dialog opens
3. Fill in:
   - Title
   - Description
   - Upload image or enter video URL
   - Toggle "Active" switch
4. Click "Save"

Edit Slide:
1. Click edit icon on slide
2. Modify fields
3. Click "Save"

Delete Slide:
1. Click delete icon on slide
2. Confirm deletion

Reorder Slides:
- Drag and drop using drag handle icon
- Order changes save automatically

5.5 MANAGING NEWS
-----------------

Tab: "News"

Add News:
1. Click "Add News" button
2. Enter title and description
3. Toggle "Published" to show/hide
4. Click "Save"

Edit News:
1. Click edit icon
2. Modify content
3. Click "Save"

Delete News:
1. Click delete icon
2. Confirm deletion

Published news appears on home page

5.6 CUSTOMIZING THEME
---------------------

Tab: "Theme"

Colors:
- Primary Color: Main brand color
- Secondary Color: Accent color
- Use color pickers to select

Section Visibility:
Toggle switches to show/hide:
- Statistics Section
- News Section
- Programs Section
- Gallery Section
- Videos Section

Click "Save Theme Settings" to apply

5.7 CUSTOMIZING HEADER
----------------------

Tab: "Header"

Settings:
- School Name: Name in navigation bar
- Show Logo: Toggle logo visibility
- Logo Position: Left or Right
- Navigation Style: Modern, Classic, Minimal
- Background Color
- Text Color
- Show Login Button
- Show Register Button
- Show Dashboard Button

Click "Save Header Settings" to apply

================================================================================
6. DATA FLOW DIAGRAM
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ADMIN UPDATES DATA                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin Browser
    â”‚
    â”‚ (1) Opens /school/front-page
    â†“
FrontPageManagement.jsx
    â”‚
    â”‚ (2) useEffect on mount
    â”‚     axios.get('/api/front-page/data')
    â†“
Server.js â†’ /api/front-page/*
    â”‚
    â”‚ (3) auth() middleware checks JWT
    â†“
frontPage.router.js
    â”‚
    â”‚ (4) Routes to controller method
    â†“
frontPage.controller.js
    â”‚
    â”‚ (5) getFrontPageData(req, res)
    â”‚     const schoolId = req.user.schoolId
    â†“
MongoDB (frontpages collection)
    â”‚
    â”‚ (6) FrontPage.findOne({ schoolId })
    â†“
Response â† Data
    â”‚
    â”‚ (7) res.json({ success: true, data: frontPageData })
    â†“
FrontPageManagement.jsx
    â”‚
    â”‚ (8) setState with received data
    â†“
Form Fields Populated

Admin Edits Data
    â”‚
    â”‚ (9) Changes school name, uploads image, etc.
    â”‚     Clicks "Save" button
    â†“
FrontPageManagement.jsx
    â”‚
    â”‚ (10) handleSave...()
    â”‚      axios.patch('/api/front-page/...')
    â†“
Server.js â†’ /api/front-page/*
    â”‚
    â”‚ (11) Auth middleware
    â†“
frontPage.controller.js
    â”‚
    â”‚ (12) update...()
    â”‚      FrontPage.findOneAndUpdate()
    â†“
MongoDB
    â”‚
    â”‚ (13) Data saved
    â†“
Response â† Success
    â”‚
    â”‚ (14) res.json({ success: true })
    â†“
FrontPageManagement.jsx
    â”‚
    â”‚ (15) Shows success message
    â”‚      triggerFrontPageRefresh()
    â”‚      window.dispatchEvent('frontpage-refresh')
    â†“
Home.jsx (if open)
    â”‚
    â”‚ (16) Event listener hears refresh event
    â”‚      fetchFrontPageData() called
    â†“
Public sees updated content!

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PUBLIC VIEWS DATA                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Visitor Browser
    â”‚
    â”‚ (1) Opens https://gentime.in
    â†“
Home.jsx
    â”‚
    â”‚ (2) useEffect on mount
    â”‚     fetchFrontPageData()
    â†“
Try to get school list
    â”‚
    â”‚ (3) axios.get('/api/school/fetch-all')
    â”‚     Extract first school ID
    â†“
Fetch public data
    â”‚
    â”‚ (4) axios.get('/api/front-page/public/:schoolId')
    â†“
Server.js â†’ /api/front-page/public/:schoolId
    â”‚
    â”‚ (5) No auth required (public route)
    â†“
frontPage.controller.js
    â”‚
    â”‚ (6) getPublicFrontPageData(req, res)
    â”‚     const { schoolId } = req.params
    â†“
MongoDB
    â”‚
    â”‚ (7) FrontPage.findOne({ schoolId })
    â†“
Response â† Data
    â”‚
    â”‚ (8) res.json({ success: true, data: frontPageData })
    â†“
Home.jsx
    â”‚
    â”‚ (9) Process data:
    â”‚     - Extract school info
    â”‚     - Combine slider images + videos
    â”‚     - Set gallery images
    â”‚     - Set news items
    â†“
Render Components
    â”‚
    â”œâ”€â†’ BeautifulSlider (images + videos)
    â”œâ”€â†’ Stats Section (students, teachers, etc.)
    â”œâ”€â†’ Gallery (campus photos)
    â”œâ”€â†’ News Section (announcements)
    â”œâ”€â†’ Programs Section
    â””â”€â†’ Call to Action
    â”‚
    â†“
Visitor sees beautiful customized home page!

================================================================================
7. TROUBLESHOOTING
================================================================================

ISSUE 1: Changes not appearing on home page
---------------------------------------------
Symptoms:
- Admin saves data in Front Page Management
- Home page shows old data

Solutions:

A. Clear Browser Cache
   - Hard refresh: Ctrl + Shift + R
   - Or open in incognito mode

B. Check if data was saved
   1. SSH to VPS: ssh root@72.60.202.218
   2. Connect to MongoDB:
      mongosh "mongodb+srv://schoolm2025:kallesh717@cluster0.ovqn73c.mongodb.net/school_management"
   3. Query front page data:
      db.frontpages.find().pretty()
   4. Verify your changes are there

C. Check backend logs
   pm2 logs gentime-api
   Look for successful PATCH requests

D. Verify refresh event
   1. Open home page
   2. Open browser console (F12)
   3. Run: window.addEventListener('frontpage-refresh', () => console.log('Refresh triggered'))
   4. Save something in admin panel
   5. Should see "Refresh triggered" in console

ISSUE 2: Error uploading images/videos
---------------------------------------
Symptoms:
- Error message when uploading files
- "Error uploading file"

Solutions:

A. Check file size
   - Images should be < 10MB
   - Videos should be < 50MB
   - Use video URLs for large videos

B. Check file format
   - Images: JPG, PNG, GIF, WebP
   - Videos: MP4, WebM
   - Or use YouTube URLs

C. Check backend logs
   pm2 logs gentime-api --err
   Look for upload errors

D. Check MongoDB size limit
   - MongoDB documents max 16MB
   - Use external hosting for large files
   - Use YouTube/Vimeo for videos

ISSUE 3: Slider not working
----------------------------
Symptoms:
- Slider doesn't show on home page
- Images/videos don't slide

Solutions:

A. Check if slides are active
   - In Front Page Management â†’ Slider tab
   - Each slide has "Active" toggle
   - Make sure at least one slide is active

B. Verify slider data
   - Open browser console on home page
   - Check: console.log(combinedSlides)
   - Should show array of slide objects

C. Check video URLs
   - YouTube embeds should use /embed/ format
   - Example: https://www.youtube.com/embed/VIDEO_ID
   - Not: https://www.youtube.com/watch?v=VIDEO_ID

ISSUE 4: Login required for home page
--------------------------------------
Symptoms:
- Can't see home page without logging in
- "Not authenticated" error

Solutions:

A. Check route configuration
   - Public route should NOT have ProtectedRoute wrapper
   - In App.jsx, line 106-108 should have no auth

B. Use public endpoint
   - Home.jsx should call /api/front-page/public/:schoolId
   - NOT /api/front-page/data (that requires auth)

C. Verify router
   - api/router/frontPage.router.js
   - Line 17: router.get('/public/:schoolId', ...) has NO auth()

ISSUE 5: Theme changes not applying
------------------------------------
Symptoms:
- Change colors in Theme tab
- Home page still shows old colors

Solutions:

A. Check theme state
   - In Home.jsx, check theme object
   - Should have primaryColor, secondaryColor

B. Verify save
   - Click "Save Theme Settings" button
   - Check for success message

C. Force refresh
   - Clear cache
   - Reopen home page

================================================================================
8. TESTING GUIDE
================================================================================

8.1 COMPLETE END-TO-END TEST
-----------------------------

Test: Upload image and verify it appears on home page

Steps:
1. Login as admin: https://gentime.in/login
2. Go to Front Page Management
3. Click "Media" tab
4. Under "Logo", click upload box
5. Select an image file (JPG/PNG)
6. Wait for "Image uploaded successfully!"
7. Open new incognito window
8. Go to: https://gentime.in
9. Verify logo appears in header

âœ… If logo appears = Connection working perfectly!
âŒ If logo doesn't appear = Check troubleshooting section

8.2 TEST EACH FEATURE
----------------------

Test 1: School Information
1. Front Page Management â†’ School Info
2. Change school name to "Test School XYZ"
3. Click "Save School Information"
4. Open home page
5. Verify name shows "Test School XYZ"

Test 2: Slider
1. Front Page Management â†’ Slider
2. Click "Add New Slide"
3. Title: "Test Slide"
4. Upload image
5. Toggle "Active" ON
6. Click "Save"
7. Open home page
8. Verify slide appears in carousel

Test 3: News
1. Front Page Management â†’ News
2. Click "Add News"
3. Title: "Test Announcement"
4. Description: "This is a test"
5. Toggle "Published" ON
6. Click "Save"
7. Open home page
8. Verify news appears in news section

Test 4: Gallery
1. Front Page Management â†’ Media â†’ Gallery Images
2. Click "Upload Gallery Images"
3. Select 3-5 images
4. Wait for upload complete
5. Open home page
6. Scroll to gallery section
7. Verify all images appear

Test 5: Videos
1. Front Page Management â†’ Media
2. Under "Hero Video", paste YouTube URL:
   https://www.youtube.com/watch?v=dQw4w9WgXcQ
3. Click save icon
4. Wait for "Video URL saved successfully!"
5. Open home page
6. Verify video appears in slider

Test 6: Theme
1. Front Page Management â†’ Theme
2. Change Primary Color to #FF0000 (red)
3. Click "Save Theme Settings"
4. Open home page
5. Verify buttons/accents are now red

8.3 API TESTING WITH CURL
-------------------------

Test: Get public front page data

Command:
curl https://api.gentime.in/api/front-page/public/SCHOOL_ID_HERE

Expected Response:
{
  "success": true,
  "data": {
    "schoolInfo": { ... },
    "media": { ... },
    "news": [ ... ],
    ...
  }
}

Test: Get authenticated data (requires token)

Command:
curl -H "Authorization: Bearer YOUR_TOKEN_HERE" \
     https://api.gentime.in/api/front-page/data

Expected Response:
Same as above

Test: Update school info (requires token)

Command:
curl -X PATCH \
     -H "Authorization: Bearer YOUR_TOKEN_HERE" \
     -H "Content-Type: application/json" \
     -d '{"name":"New School Name"}' \
     https://api.gentime.in/api/front-page/school-info

Expected Response:
{
  "success": true,
  "message": "School information updated successfully"
}

================================================================================
VERIFICATION CHECKLIST
================================================================================

âœ… Backend Routes Registered
   File: api/server.js (Line 68)
   Route: app.use("/api/front-page", frontPageRouter)

âœ… Frontend Routes Configured
   File: frontend/src/App.jsx
   Admin: <Route path="school/front-page" element={<FrontPageManagement />} />
   Public: <Route index element={<Home />} />

âœ… API Endpoints Working
   GET    /api/front-page/data (protected)
   GET    /api/front-page/public/:schoolId (public)
   PATCH  /api/front-page/school-info (protected)
   PATCH  /api/front-page/media (protected)
   POST   /api/front-page/news (protected)
   PATCH  /api/front-page/news/:newsId (protected)
   DELETE /api/front-page/news/:newsId (protected)
   PATCH  /api/front-page/theme (protected)
   PATCH  /api/front-page/header-settings (protected)

âœ… Components Connected
   Admin: FrontPageManagement.jsx â†’ Backend API
   Public: Home.jsx â†’ Backend API
   Slider: BeautifulSlider.jsx â† Home.jsx

âœ… Auto-Refresh Working
   Event: 'frontpage-refresh'
   Listener: Home.jsx
   Trigger: FrontPageManagement.jsx (after save)

âœ… Data Flow Complete
   Admin uploads â†’ Backend saves â†’ MongoDB stores â†’ Public fetches â†’ Visitor sees

================================================================================
CONCLUSION
================================================================================

âœ… Front Page Management is FULLY CONNECTED and WORKING PROPERLY

All components are properly connected:
- Admin panel saves to backend
- Backend stores in MongoDB
- Public home page fetches from backend
- Auto-refresh ensures immediate updates
- No code changes needed

To customize your school's home page:
1. Login as admin
2. Go to Front Page Management
3. Edit any section
4. Click Save
5. Changes appear immediately

Everything is working as expected! ğŸ‰

================================================================================
For Support: kalleshkivadannavar717@gmail.com
GitHub: https://github.com/kallesh653/gentime
================================================================================
