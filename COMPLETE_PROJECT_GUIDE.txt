================================================================================
GENTIME SCHOOL MANAGEMENT SYSTEM - COMPLETE PROJECT GUIDE
================================================================================

Project Name: GenTime School Management System
Author: Kallesh SK
Domain: gentime.in
API Domain: api.gentime.in
VPS IP: 72.60.202.218
GitHub: https://github.com/kallesh653/gentime

================================================================================
TABLE OF CONTENTS
================================================================================

1. PROJECT OVERVIEW
2. PROJECT STRUCTURE
3. TECHNOLOGY STACK
4. INITIAL SETUP (ONE-TIME)
5. DEVELOPMENT WORKFLOW
6. DEPLOYMENT PROCESS
7. EVERYDAY COMMANDS
8. TROUBLESHOOTING
9. MAINTENANCE TASKS
10. BACKUP & RESTORE

================================================================================
1. PROJECT OVERVIEW
================================================================================

GenTime is a full-stack school management system with the following features:

FRONTEND (React + Vite):
- Beautiful home page with image/video slider
- Student management
- Teacher management
- Course & class management
- Attendance tracking
- Fee management
- Examination & marksheet system
- Notice board
- SMS management
- Front page customization (Admin)

BACKEND (Node.js + Express):
- RESTful API
- MongoDB database
- JWT authentication
- File upload support
- CORS enabled

USERS:
- School Admin
- Teachers
- Students

================================================================================
2. PROJECT STRUCTURE
================================================================================

gentime/
│
├── api/                          # Backend (Node.js + Express)
│   ├── router/                   # API routes
│   │   ├── auth.router.js
│   │   ├── student.router.js
│   │   ├── teacher.router.js
│   │   ├── class.router.js
│   │   ├── course.router.js
│   │   ├── subject.router.js
│   │   ├── attendance.router.js
│   │   ├── examination.router.js
│   │   ├── fees.router.js
│   │   ├── notice.router.js
│   │   ├── sms.router.js
│   │   └── frontpage.router.js
│   ├── models/                   # Database models
│   ├── middleware/               # Authentication & authorization
│   ├── server.js                 # Main server file
│   ├── package.json
│   └── .env                      # Environment variables (NOT in Git)
│
├── frontend/                     # Frontend (React + Vite + MUI)
│   ├── src/
│   │   ├── client/              # Public-facing pages
│   │   │   ├── components/
│   │   │   │   ├── home/
│   │   │   │   │   ├── Home.jsx
│   │   │   │   │   ├── BeautifulSlider.jsx
│   │   │   │   │   ├── Hero.jsx
│   │   │   │   │   └── Carousel.jsx
│   │   │   │   └── ...
│   │   │   └── utility components/
│   │   │       └── app bar/
│   │   │           └── Navbar.jsx
│   │   ├── school/              # School admin dashboard
│   │   │   ├── School.jsx
│   │   │   └── components/
│   │   │       ├── dashboard/
│   │   │       ├── students/
│   │   │       ├── teachers/
│   │   │       ├── attendance/
│   │   │       ├── examinations/
│   │   │       ├── fees/
│   │   │       ├── front-page-management/
│   │   │       └── ...
│   │   ├── teacher/             # Teacher dashboard
│   │   │   ├── Teacher.jsx
│   │   │   └── components/
│   │   ├── student/             # Student dashboard
│   │   │   ├── Student.jsx
│   │   │   └── components/
│   │   ├── environment.js       # API URL configuration
│   │   └── App.jsx              # Main app component
│   ├── package.json
│   ├── vite.config.js
│   └── .env.production          # Production environment variables
│
├── deploy.sh                     # Automated deployment script
├── .gitignore                    # Files to ignore in Git
├── COMPLETE_PROJECT_GUIDE.txt   # This file
├── DEPLOYMENT_TROUBLESHOOTING.txt
├── HOW_TO_RUN_PROJECT.txt
└── README.md

================================================================================
3. TECHNOLOGY STACK
================================================================================

FRONTEND:
- React 18.x
- Vite (build tool)
- Material-UI (MUI) v5
- React Router v6
- Axios (HTTP client)

BACKEND:
- Node.js v22.x
- Express.js
- MongoDB (MongoDB Atlas)
- Mongoose (ODM)
- JWT (authentication)
- Multer (file uploads)
- CORS

DEPLOYMENT:
- VPS: Ubuntu Server (Hostinger)
- Web Server: Nginx
- Process Manager: PM2
- SSL: Let's Encrypt (Certbot)
- Version Control: Git + GitHub

DATABASE:
- MongoDB Atlas (Cloud)
- Connection: mongodb+srv://...

================================================================================
4. INITIAL SETUP (ONE-TIME)
================================================================================

4.1 LOCAL DEVELOPMENT SETUP
----------------------------

# Clone repository
git clone https://github.com/kallesh653/gentime.git
cd gentime

# Backend setup
cd api
npm install
# Create .env file with:
PORT=5000
JWTSECRET=your_jwt_secret
MONGODB_URI=your_mongodb_connection_string
NODE_ENV=development
FRONTEND_URL=http://localhost:5173

# Frontend setup
cd ../frontend
npm install
# Create .env file with:
VITE_API_URL=http://localhost:5000/api

# Start development
# Terminal 1 - Backend:
cd api
npm start

# Terminal 2 - Frontend:
cd frontend
npm run dev

# Open browser: http://localhost:5173

----------------------------
4.2 VPS INITIAL SETUP (ALREADY DONE)
----------------------------

✅ Node.js v22.20.0 installed
✅ Git installed
✅ Nginx installed and configured
✅ PM2 installed globally
✅ SSL certificates installed (Let's Encrypt)
✅ Firewall configured (UFW)
✅ Domain configured (gentime.in, api.gentime.in)

================================================================================
5. DEVELOPMENT WORKFLOW
================================================================================

STEP 1: MAKE CHANGES ON LOCAL COMPUTER
---------------------------------------
- Edit files using VS Code, Claude Code, or any editor
- Test locally: npm run dev (frontend) and npm start (backend)

STEP 2: COMMIT CHANGES (AUTOMATIC WITH CLAUDE CODE)
----------------------------------------------------
- Claude Code automatically commits and pushes to GitHub
- Or manually:
  git add .
  git commit -m "Your message"
  git push origin main

STEP 3: DEPLOY TO VPS
---------------------
See section 6 for deployment commands

STEP 4: TEST ON PRODUCTION
---------------------------
- Open https://gentime.in
- Clear browser cache (Ctrl+Shift+R)
- Test all features

================================================================================
6. DEPLOYMENT PROCESS
================================================================================

METHOD 1: AUTOMATED SCRIPT (RECOMMENDED)
-----------------------------------------

On VPS, run:
```bash
/root/deploy.sh
```

That's it! The script does everything automatically.

-------------------------------------------
METHOD 2: MANUAL DEPLOYMENT (STEP-BY-STEP)
-------------------------------------------

# Connect to VPS
ssh root@72.60.202.218

# Navigate to project
cd /root/gentime

# Pull latest code from GitHub
git fetch origin
git reset --hard origin/main

# Build frontend
cd frontend
rm -rf dist
npm run build

# Deploy to production
sudo rm -rf /var/www/gentime/*
sudo cp -r dist/* /var/www/gentime/
sudo chown -R www-data:www-data /var/www/gentime
sudo chmod -R 755 /var/www/gentime

# Restart Nginx
sudo systemctl restart nginx

# Verify backend is running
pm2 status

# If backend needs restart
cd /root/gentime/api
pm2 restart gentime-api

# Done!

-------------------------------------------
METHOD 3: ONE-LINE COMMAND
-------------------------------------------

ssh root@72.60.202.218 "cd /root/gentime && git fetch origin && git reset --hard origin/main && cd frontend && rm -rf dist && npm run build && sudo rm -rf /var/www/gentime/* && sudo cp -r dist/* /var/www/gentime/ && sudo chown -R www-data:www-data /var/www/gentime && sudo systemctl restart nginx"

Then clear browser cache!

================================================================================
7. EVERYDAY COMMANDS
================================================================================

WHEN YOU CHANGE CODE:
----------------------

1. Code changes are pushed to GitHub (by Claude Code or you)

2. SSH to VPS:
   ssh root@72.60.202.218

3. Run deployment:
   /root/deploy.sh

4. Clear browser cache:
   Ctrl + Shift + R (or open incognito mode)

COMMON CHECKS:
--------------

# Check backend status
pm2 status

# View backend logs
pm2 logs gentime-api

# Restart backend
pm2 restart gentime-api

# Check Nginx status
sudo systemctl status nginx

# Restart Nginx
sudo systemctl restart nginx

# View Nginx error logs
sudo tail -50 /var/log/nginx/error.log

# Check disk space
df -h

# Check memory usage
free -h

================================================================================
8. TROUBLESHOOTING
================================================================================

ISSUE: Changes not showing after deployment
SOLUTION:
- Clear browser cache (Ctrl+Shift+R)
- Open in incognito mode
- Wait 2-3 minutes for cache to clear
- Check if files in /var/www/gentime/ have today's date

ISSUE: Login not working
SOLUTION:
- Check .env.production has: VITE_API_URL=https://api.gentime.in/api
- Rebuild: cd frontend && npm run build
- Check backend is running: pm2 status
- Test API: curl https://api.gentime.in/api/auth/check

ISSUE: Backend not running
SOLUTION:
cd /root/gentime/api
pm2 restart gentime-api
pm2 logs gentime-api

ISSUE: Nginx error
SOLUTION:
sudo nginx -t (test configuration)
sudo tail -100 /var/log/nginx/error.log (check errors)
sudo systemctl restart nginx

ISSUE: Git pull fails (local changes)
SOLUTION:
git stash (save changes)
git pull origin main
OR
git reset --hard origin/main (discard local changes)

ISSUE: npm build fails
SOLUTION:
rm -rf node_modules
rm package-lock.json
npm install
npm run build

ISSUE: Permission denied
SOLUTION:
sudo chown -R www-data:www-data /var/www/gentime
sudo chmod -R 755 /var/www/gentime

================================================================================
9. MAINTENANCE TASKS
================================================================================

DAILY:
------
- Check PM2 status: pm2 status
- Monitor logs if issues: pm2 logs gentime-api

WEEKLY:
-------
- Check disk space: df -h
- Review error logs: sudo tail -100 /var/log/nginx/error.log
- Update packages if needed: npm outdated

MONTHLY:
--------
- Backup database (MongoDB Atlas auto-backups)
- Update Node.js if new LTS: nvm install --lts
- SSL certificate renewal (auto-renews via certbot)
- Clean old backups: rm -rf /var/www/gentime_backup_OLD_DATE

QUARTERLY:
----------
- Review and update npm packages
- Security audit: npm audit
- Performance optimization

================================================================================
10. BACKUP & RESTORE
================================================================================

BACKUP MONGODB DATABASE:
------------------------
# MongoDB Atlas has automatic backups
# To manual backup:
mongodump --uri="mongodb+srv://..." --out=/root/backup/

BACKUP UPLOADED FILES:
----------------------
# If you store files on VPS
tar -czf /root/backup_files.tar.gz /var/www/gentime/uploads

BACKUP CODE:
------------
# Already on GitHub
# To create local backup:
cd /root
tar -czf gentime_backup_$(date +%Y%m%d).tar.gz gentime/

RESTORE:
--------
# Pull from GitHub
cd /root/gentime
git pull origin main

# Restore database (if needed)
mongorestore --uri="mongodb+srv://..." /root/backup/

================================================================================
IMPORTANT FILES & CONFIGURATIONS
================================================================================

BACKEND .ENV (api/.env):
------------------------
PORT=5000
JWTSECRET=LSKDFJDLSJWIEOFFJDSLKJFLJ328929FDOSKJFlsdkfjdslskdfj
MONGODB_URI=mongodb+srv://schoolm2025:kallesh717@cluster0.ovqn73c.mongodb.net/school_management
NODE_ENV=production
FRONTEND_URL=https://gentime.in
PRODUCTION_URL=https://www.gentime.in

FRONTEND .ENV.PRODUCTION (frontend/.env.production):
----------------------------------------------------
VITE_API_URL=https://api.gentime.in/api

NGINX CONFIGURATION (/etc/nginx/sites-available/gentime):
----------------------------------------------------------
# Frontend
server {
    listen 443 ssl http2;
    server_name gentime.in www.gentime.in;

    ssl_certificate /etc/letsencrypt/live/gentime.in/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/gentime.in/privkey.pem;

    root /var/www/gentime;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }
}

# Backend API
server {
    listen 443 ssl http2;
    server_name api.gentime.in;

    ssl_certificate /etc/letsencrypt/live/gentime.in/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/gentime.in/privkey.pem;

    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

PM2 CONFIGURATION:
------------------
# Start backend
pm2 start /root/gentime/api/server.js --name gentime-api

# Save PM2 list
pm2 save

# Auto-start on reboot
pm2 startup

================================================================================
QUICK REFERENCE - MOST USED COMMANDS
================================================================================

DEPLOYMENT:
-----------
ssh root@72.60.202.218
/root/deploy.sh

BACKEND MANAGEMENT:
-------------------
pm2 status                    # Check status
pm2 logs gentime-api          # View logs
pm2 restart gentime-api       # Restart
pm2 stop gentime-api          # Stop
pm2 start gentime-api         # Start

NGINX MANAGEMENT:
-----------------
sudo systemctl status nginx   # Check status
sudo systemctl restart nginx  # Restart
sudo nginx -t                 # Test config
sudo systemctl reload nginx   # Reload config

FILE LOCATIONS:
---------------
Code: /root/gentime
Production: /var/www/gentime
Nginx config: /etc/nginx/sites-available/gentime
Logs: /var/log/nginx/

GIT COMMANDS:
-------------
git pull origin main          # Pull latest
git status                    # Check status
git log -1                    # Last commit
git reset --hard origin/main  # Force update

================================================================================
CONTACT & SUPPORT
================================================================================

Developer: Kallesh SK
Email: kalleshkivadannavar717@gmail.com
GitHub: https://github.com/kallesh653/gentime

For Issues:
1. Check browser console (F12)
2. Check PM2 logs: pm2 logs gentime-api
3. Check Nginx logs: sudo tail -50 /var/log/nginx/error.log
4. Review this guide's troubleshooting section

================================================================================
LAST UPDATED: 2025-10-06
VERSION: 1.0.0
================================================================================
